<!doctype html><html lang=en><head><title>Psake Enhancements</title><meta charset=utf-8><meta name=generator content="Hugo 0.111.3"><meta name=author content="Florian Winkelbauer"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://florianwinkelbauer.com/posts/2021-07-09-psake-enhancements/><link rel=alternate type=application/rss+xml title=RSS href=https://florianwinkelbauer.com/index.xml><link rel=stylesheet href=https://florianwinkelbauer.com/main.css></head><body><header class=dark><h2><a href=https://florianwinkelbauer.com/>Florian Winkelbauer</a></h2><nav><a href=/about>About</a>
<a href=/notes>Notes</a>
<a href=/projects>Projects</a></nav></header><main><article><header><h1><a href=https://florianwinkelbauer.com/posts/2021-07-09-psake-enhancements/>Psake Enhancements</a></h1><time datetime=2021-07-09T00:00:00Z>July 09, 2021</time></header><p><a href=https://github.com/psake/psake>Psake</a> is <code>make</code>-like tool written in PowerShell. Instead of a
<code>makefile</code> you write a <code>psakefile.ps1</code> which consists of a set of tasks. Calling
<code>psake &lt;task name></code> searches for a <code>psakefile.ps1</code> in the current directory to
then call the given task. Most of the time I store my <code>psakefile.ps1</code> in the
root of my git project, which means that I have to set the working directory of
my terminal to this directory. I have recently created a small PowerShell script
which helps me to remember task names (using <a href=https://github.com/junegunn/fzf>fzf</a>) while also giving me
the option to call <code>psake</code> anywhere in my git projects:</p><pre><code class=language-powershell>$root = git rev-parse --show-toplevel
if ($LASTEXITCODE -ne 0) { exit $LASTEXITCODE }

try {
    Push-Location $root

    # This search approach is not perfect, but works for my needs
    $tasks = Get-Content 'psakefile.ps1' |
      Select-String -Pattern '^task\s+(.+?)\s+' -AllMatches |
      ForEach-Object { $_.Matches.Groups[1].Value }

    $selectedTask = $tasks | fzf

    if ($selectedTask) {
        psake $selectedTask
    }
}
finally {
    Pop-Location
}
</code></pre></article></main><footer><p>Copyright 2023, Florian Winkelbauer. All rights reserved.</p></footer></body></html>